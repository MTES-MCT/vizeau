import factory from '@adonisjs/lucid/factories'
import Exploitation from '#models/exploitation'
import { ContactFactory } from '#database/factories/contact_factory'
import { ExploitationTagFactory } from '#database/factories/exploitation_tag_factory'
import { TerritoireFactory } from '#database/factories/territoire_factory'
import { LogEntryFactory } from '#database/factories/log_entry_factory'
import { fakerFR as faker } from '@faker-js/faker'

export const ExploitationFactory = factory
  .define(Exploitation, async () => {
    return {
      name: faker.company.name(),
      formeJuridique: 'SAS',
      siret: faker.string.numeric(14),
      addressLine1: faker.location.streetAddress(),
      addressLine2: faker.location.secondaryAddress(),
      postalCode: faker.location.zipCode(),
      commune: faker.location.city(),
      location: {
        x: faker.location.longitude({ min: -0.66, max: 5.29 }),
        y: faker.location.latitude({ min: 44.1, max: 48.56 }),
      },
    }
  })
  .relation('contacts', () => ContactFactory)
  .relation('tags', () => ExploitationTagFactory)
  .relation('territoire', () => TerritoireFactory)
  .relation('logEntries', () => LogEntryFactory)
  .build()
