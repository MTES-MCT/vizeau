import vine from '@vinejs/vine'
import { ExploitationTypeStructure } from '#models/exploitation'

const exploitationFormFieldsValidator = {
  name: vine.string().maxLength(255),
  typeStructure: vine.enum(Object.values(ExploitationTypeStructure)).optional(),
  siret: vine.string().maxLength(14).optional(),
  addressLine1: vine.string().maxLength(255).optional(),
  addressLine2: vine.string().maxLength(255).optional(),
  postalCode: vine.string().maxLength(10).optional(),
  postalBox: vine.string().maxLength(255).optional(),
  commune: vine.string().maxLength(255).optional(),
  notes: vine.string().maxLength(4000).optional(),
  latitude: vine.number().min(-90).max(90).optional(),
  longitude: vine.number().min(-180).max(180).optional(),
  contactName: vine.string().maxLength(255).optional(),
  contactPhoneNumber: vine.string().minLength(7).maxLength(20).optional(),
  contactEmail: vine.string().email().optional(),
}

export const createExploitationValidator = vine.compile(
  vine.object(exploitationFormFieldsValidator)
)

// Same but with params for the exploitation ID
export const updateExploitationValidator = vine.compile(
  vine.object({
    ...exploitationFormFieldsValidator,
    params: vine.object({ id: vine.string().uuid() }),
  })
)
