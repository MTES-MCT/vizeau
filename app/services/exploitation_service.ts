import Exploitation from '#models/exploitation'
import Contact from '#models/contact'
import { ModelAttributes } from '@adonisjs/lucid/types/model'

export class ExploitationService {
  async createExploitationWithContact(
    exploitationData: Partial<ModelAttributes<Exploitation>>,
    contactData: Partial<ModelAttributes<Contact>>
  ) {
    const exploitation = await Exploitation.create(exploitationData)

    if (contactData.name) {
      await exploitation.related('contacts').create(contactData)
    }

    return exploitation
  }
}
