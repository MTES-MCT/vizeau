import ListItem from '~/ui/ListItem'
import { ExploitationJson } from '../../../types/models'
import { displayContactName } from '~/functions/contacts'

interface ExploitationsListProps {
  exploitations?: ExploitationJson[]
}

export default function ExploitationsList({ exploitations = [] }: ExploitationsListProps) {
  if (exploitations.length === 0) {
    return null
  }

  return (
    <div className="flex flex-col gap-2">
      {exploitations.map((exploitation, index) => {
        const contact = exploitation.contacts?.[0]

        return (
          <ListItem
            key={exploitation.id}
            title={exploitation.name}
            linkProps={{ href: `/exploitations/${exploitation.id}` }}
            priority={index % 2 === 1 ? 'secondary' : 'primary'}
            metas={[
              {
                iconId: 'fr-icon-user-line',
                content: displayContactName(contact),
              },
              {
                iconId: 'fr-icon-mail-line',
                content: contact?.email || 'N/A',
              },
              {
                iconId: 'fr-icon-phone-line',
                content: contact?.phoneNumber || 'N/A',
              },
              {
                iconId: 'fr-icon-map-pin-2-line',
                content: exploitation.commune || 'N/A',
              },
            ]}
            tags={exploitation.tags?.map((tag) => ({ label: tag.name }))}
          />
        )
      })}
    </div>
  )
}
