import ListItem from '~/ui/ListItem'
import { ExploitationJson } from '../../../types/models'
import { displayContactName } from '~/functions/contacts'

interface ExploitationsListProps {
  exploitations?: ExploitationJson[]
}

export default function ExploitationsList({ exploitations = [] }: ExploitationsListProps) {
  return (
    <>
      {exploitations.length > 0 &&
        exploitations.map((exploitation, index) => {
          const contact = exploitation.contacts?.[0]

          return (
            <ListItem
              key={exploitation.id}
              title={exploitation.name}
              iconId="building-line"
              href={`/exploitations/${exploitation.id}`}
              priority={index % 2 === 1 ? 'secondary' : 'primary'}
              metas={[
                {
                  iconId: 'fr-icon-user-line',
                  content: displayContactName(contact),
                },
                {
                  iconId: 'fr-icon-mail-line',
                  content: contact?.email || 'N/A',
                },
                {
                  iconId: 'fr-icon-phone-line',
                  content: contact?.phoneNumber || 'N/A',
                },
                {
                  iconId: 'fr-icon-map-pin-2-line',
                  content: exploitation.commune || 'N/A',
                }
              ]}
            />
          )
        })}
    </>
  )
}
