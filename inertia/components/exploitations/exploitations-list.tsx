import ListItem from '~/ui/ListItem'
import { ExploitationJson } from '../../../types/models'
import { displayContactName } from '~/functions/contacts'
import { router } from '@inertiajs/react'
import LocationFrance from '@codegouvfr/react-dsfr/picto/LocationFrance';

import EmptyPlaceholder from '~/ui/EmptyPlaceholder'

interface ExploitationsListProps {
  exploitations?: ExploitationJson[]
}

export default function ExploitationsList({ exploitations = [] }: ExploitationsListProps) {
  return (
    <>
      {exploitations.length > 0 ? (
        exploitations.map((exploitation, index) => {
          const contact = exploitation.contacts?.[0]

          return (
            <ListItem
              key={exploitation.id}
              title={exploitation.name}
              href={`/exploitations/${exploitation.id}`}
              priority={index % 2 === 1 ? 'secondary' : 'primary'}
              metas={[
                {
                  iconId: 'fr-icon-user-line',
                  content: displayContactName(contact),
                },
                {
                  iconId: 'fr-icon-mail-line',
                  content: contact?.email || 'N/A',
                },
                {
                  iconId: 'fr-icon-phone-line',
                  content: contact?.phoneNumber || 'N/A',
                },
                {
                  iconId: 'fr-icon-map-pin-2-line',
                  content: exploitation.commune || 'N/A',
                },
              ]}
            />
          )
        })
      ) : (
        <EmptyPlaceholder
          label="Aucune exploitation enregistrée"
          buttonLabel="Ajouter une première exploitation"
          buttonIcon="fr-icon-add-line"
          handleClick={() => router.visit('/exploitations/creation')}
          pictogram={LocationFrance}
        />
      )}
    </>
  )
}
