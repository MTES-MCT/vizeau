import { Table } from '@codegouvfr/react-dsfr/Table'
import { ExploitationJson } from '../../../types/models'

export default function ExploitationsTable({
  exploitations = [],
}: {
  exploitations?: ExploitationJson[]
}) {
  return (
    exploitations.length > 0 && (
      <div>
        <Table
          bordered
          fixed
          headers={[
            <div>
              <span className="fr-icon-map-pin-user-line fr-icon--sm" /> Organisation
            </div>,
            <div>
              <span className="fr-icon-user-line fr-icon--sm" /> Utilisateur
            </div>,
            <div>
              <span className="fr-icon-mail-line fr-icon--sm" /> Email
            </div>,
            <div>
              <span className="fr-icon-phone-line fr-icon--sm" /> Téléphone
            </div>,
            <div>
              <span className="fr-icon-map-pin-2-line fr-icon--sm" /> Localisation
            </div>,
          ]}
          data={exploitations.map((exploitation) => {
            const row = [[exploitation.name]]

            if (exploitation.contacts && exploitation.contacts.length > 0) {
              const contact = exploitation.contacts[0]
              row.push([contact.name || 'N/A'])
              row.push([contact.email || 'N/A'])
              row.push([contact.phoneNumber || 'N/A'])
            } else {
              row.push(['N/A'])
              row.push(['N/A'])
              row.push(['N/A'])
            }
            row.push([
              exploitation.location
                ? `(${exploitation.location.x}, ${exploitation.location.y})`
                : 'N/A',
            ])

            return row
          })}
        />
      </div>
    )
  )
}
